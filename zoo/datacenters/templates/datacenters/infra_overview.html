<div class="ui stackable grid tab" data-tab="infrastructure">
  {% for datacenter in datacenters %}
    {% with metadata=datacenter.template_metadata %}
    <div class="ui segment">
      <div class="flex-horizontal--space-between">
        <h3 class="ui marginless header display-flex">
          {% if metadata.platform == "kubernetes" %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="9.7 9.4 210.6 204.6" class="ui marginless icon" aria-hidden="true" height="24">
              <path d="M134.4 126.5a3.6 3.6 0 00-.9-.1 3.7 3.7 0 00-1.4.4 3.7 3.7 0 00-1.8 4.8l8.5 20.6a43.5 43.5 0 0017.6-22l-22-3.8zm-34.2 2.9a3.7 3.7 0 00-3.6-3 3.7 3.7 0 00-.7.2L74 130.1a43.7 43.7 0 0017.6 22l8.4-20.4v-.1a3.7 3.7 0 00.2-2.3zm18.2 8a3.7 3.7 0 00-6.5 0L101 156.8A43.6 43.6 0 00125 158q2.2-.5 4.3-1.2l-10.7-19.4zm34-45L135.7 107a3.7 3.7 0 001.5 6.5l21.4 6.2a44.3 44.3 0 00-6.4-27.4zM121.6 94a3.7 3.7 0 006 2.9l18-12.8A43.9 43.9 0 00120.4 72l1.3 22.1zm-19.1 3a3.7 3.7 0 005.9-2.9h.1l1.2-22.2a44.7 44.7 0 00-4.5.8 43.5 43.5 0 00-20.9 11.4L102.6 97zm-9.7 16.7a3.7 3.7 0 001.5-6.4l-16.6-15a43.5 43.5 0 00-6.1 27.6l21.2-6.1zm16.1 6.5l6.1 3 6.1-3 1.5-6.6-4.2-5.3h-6.8l-4.2 5.3z"/>
              <path d="M216.2 133.2l-17.4-75.7a13.6 13.6 0 00-7.3-9L121 14.6a13.6 13.6 0 00-11.7 0L38.8 48.4a13.6 13.6 0 00-7.3 9.1L14 133.2a13.3 13.3 0 000 5.8 13.5 13.5 0 00.5 1.7 13.1 13.1 0 001.3 2.7l.8 1.1 48.8 60.7.7.7a13.4 13.4 0 002.5 2.2 14 14 0 003.9 1.6 13.3 13.3 0 003.4.5h78.3a13 13 0 001.4 0 13.5 13.5 0 002-.5 13.9 13.9 0 001.4-.4l1-.4a14 14 0 001.5-.9 13.3 13.3 0 003.2-2.8l1.5-1.9 47.3-58.8a13.2 13.2 0 002.1-3.8 13.7 13.7 0 00.5-1.7 13.3 13.3 0 000-5.8zm-73.1 29.4a14.5 14.5 0 00.7 1.7 3.3 3.3 0 00-.4 2.5 39.4 39.4 0 003.8 6.7 35 35 0 012.2 3.4l.6 1a4.2 4.2 0 11-7.6 3.7l-.6-1a35.3 35.3 0 01-1.2-4 39.3 39.3 0 00-2.9-7 3.3 3.3 0 00-2.1-1.4l-1-1.6a54.6 54.6 0 01-38.9 0l-1 1.7a3.4 3.4 0 00-1.8.8 29.5 29.5 0 00-3.2 7.6 34.9 34.9 0 01-1.2 3.9l-.6 1a4.2 4.2 0 11-7.6-3.5l.5-1.2a35.2 35.2 0 012.3-3.3 41.2 41.2 0 003.8-7 4.2 4.2 0 00-.3-2.3l.7-1.8A55 55 0 0163 132l-1.9.3a4.7 4.7 0 00-2.4-.9 39.5 39.5 0 00-7.3 2.2 35.6 35.6 0 01-3.8 1.4l-1.1.3h-.1a4.2 4.2 0 11-2-8.2h.1l1.2-.3a35.3 35.3 0 014-.3 39.4 39.4 0 007.6-1.3 5.8 5.8 0 001.8-1.8l1.8-.5a54.6 54.6 0 018.6-38l-1.4-1.3a4.7 4.7 0 00-.8-2.4 39.4 39.4 0 00-6.3-4.4 35.3 35.3 0 01-3.5-2l-.9-.8a4.5 4.5 0 01-1-6.2 4 4 0 013.3-1.5 5 5 0 013 1l.9.8a35.3 35.3 0 012.8 3 39.4 39.4 0 005.7 5.1 3.3 3.3 0 002.5.3l1.5 1A54.3 54.3 0 01102.9 62a55 55 0 017.6-1.2V59a4.6 4.6 0 001.5-2.2 39.5 39.5 0 00-.5-7.6 35.5 35.5 0 01-.6-4V44v-.1a4.2 4.2 0 118.5 0V45a35.1 35.1 0 01-.6 4 39.5 39.5 0 00-.5 7.6 3.3 3.3 0 001.4 2.2v1.8a55.3 55.3 0 0135.1 17l1.6-1.2a4.7 4.7 0 002.6-.3 39.5 39.5 0 005.7-5.1 35 35 0 012.8-3l.9-.7a4.2 4.2 0 115.3 6.6l-1 .7a35.1 35.1 0 01-3.5 2 39.5 39.5 0 00-6.3 4.5 3.3 3.3 0 00-.7 2.4l-1.5 1.3a54.8 54.8 0 018.7 38l1.8.5a4.7 4.7 0 001.8 1.8 39.5 39.5 0 007.5 1.3 35.6 35.6 0 014 .3l1.3.3a4.2 4.2 0 11-1.9 8.2h-.1l-1.1-.2a35.1 35.1 0 01-3.8-1.5 39.5 39.5 0 00-7.3-2.2 3.3 3.3 0 00-2.4 1l-1.8-.4a55 55 0 01-24.3 30.6z"/>
            </svg>
          {% elif metadata.platform == "rancher" %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60.493 28.416" class="ui marginless icon" aria-hidden="true" version="1.1" width="32">
              <g transform="translate(-79.201 -162.595)" id="layer1">
                <g transform="matrix(.26458 0 0 .26458 79.073 162.595)" id="g3725" fill="#000">
                  <path id="path3715" d="M229 23.6l-2.5-14.9c-.8-4.8-2.7-8.7-4.1-8.7-1.5 0-2.7 4-2.7 8.8v3.9c0 4.8-4 8.8-8.8 8.8h-4.7v10.7h15.5c4.8 0 8.1-3.9 7.3-8.6" class="st0" fill="#000"/>
                  <path id="path3717" d="M193.9 11h-48.7c-.3 0-.6 0-.8.1V8.8c0-4.8-1.2-8.8-2.7-8.8-1.5 0-3.3 3.9-4.1 8.7l-2.5 14.9c-.8 4.8 2.5 8.7 7.4 8.7h14.6c1.5 0 2.9-.2 4.2-.6-.5 2.5-2.6 4.4-5.3 4.4h-20.5c-3.3 0-5.8-3-5.3-6.3l2.1-12.5c.5-3.3-2-6.3-5.3-6.3H24.8c-2.2 0-4 1.3-4.9 3.2L.7 43.5c-.3.5-.3 1.1.1 1.6l3.7 4.4c.5.6 1.3.6 1.9.2l13.1-10.3V102c0 3 2.4 5.4 5.4 5.4h29c3 0 5.4-2.4 5.4-5.4V80.2c0-3 2.4-5.4 5.4-5.4h72.4c3 0 5.4 2.4 5.4 5.4V102c0 3 2.4 5.4 5.4 5.4h29c3 0 5.4-2.4 5.4-5.4V78.6h-15.4c-4.8 0-8.8-4-8.8-8.8V54.7c0-2.9 1.4-5.4 3.5-7v18c0 4.8 4 8.8 8.8 8.8h23.7c4.8 0 8.8-4 8.8-8.8V19.9c-.2-5-4.1-8.9-9-8.9" class="st0" fill="#000"/>
                </g>
              </g>
              <style type="text/css" id="style3713">.st0{fill:#000}</style>
            </svg>
          {% else %}
            <i class="cog icon"></i>
          {% endif %}

          <div class="content">
            {{ metadata.platform.title }}
          </div>
        </h3>
        <div>
          <div class="ui blue large circular regular-font label">region:<b>{{ metadata.region }}</b></div>
        </div>
      </div>
      {% if metadata.members %}
        <table class="ui celled striped table">
          <thead>
            <tr>
              <th colspan="3">
                <h4 class="ui grey header">
                  <i class="users icon"></i>
                  {{ metadata.members_label }}
                </h4>
              </th>
            </tr>
          </thead>
          <tbody>
            {% for member in metadata.members %}
            <tr>
              <td class="four wide">
                {{ member.name }}
              </td>
              {% if member.email %}
              <td>
                <i class="envelope icon"></i> {{ member.email }}
              </td>
              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}
      {% if metadata.components %}
        <table class="ui celled striped table">
          <thead>
            <tr>
              <th colspan="3">
                <h4 class="ui grey header">
                  <i class="sitemap icon"></i>
                  {{ metadata.components_label }}
                </h4>
              </th>
            </tr>
          </thead>
          <tbody>
            {% for component in metadata.components %}
            <tr>
              <td class="four wide">
                {{ component.name }}
              </td>
              {% if component.urls %}
              <td>
                {% for url in component.urls %}
                  <i class="external alternate icon"></i>
                  <a href="{{ url }}">{{ url }}</a>
                  {% if not forloop.last %}<br>{% endif %}
                {% endfor %}
              </td>
              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}
    </div>
    {% endwith %}
  {% endfor %}
</div>
